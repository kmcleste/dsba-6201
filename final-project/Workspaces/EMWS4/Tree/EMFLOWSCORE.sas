****************************************************************;
******             DECISION TREE SCORING CODE             ******;
****************************************************************;
 
******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
LENGTH F_RESPOND  $   12;
LENGTH I_RESPOND  $   12;
LENGTH _WARN_  $    4;
 
******              LABELS FOR NEW VARIABLES              ******;
label _NODE_ = 'Node' ;
label _LEAF_ = 'Leaf' ;
label P_RESPOND1 = 'Predicted: RESPOND=1' ;
label P_RESPOND0 = 'Predicted: RESPOND=0' ;
label Q_RESPOND1 = 'Unadjusted P: RESPOND=1' ;
label Q_RESPOND0 = 'Unadjusted P: RESPOND=0' ;
label V_RESPOND1 = 'Validated: RESPOND=1' ;
label V_RESPOND0 = 'Validated: RESPOND=0' ;
label R_RESPOND1 = 'Residual: RESPOND=1' ;
label R_RESPOND0 = 'Residual: RESPOND=0' ;
label F_RESPOND = 'From: RESPOND' ;
label I_RESPOND = 'Into: RESPOND' ;
label U_RESPOND = 'Unnormalized Into: RESPOND' ;
label _WARN_ = 'Warnings' ;
 
 
******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
 
 
_ARBFMT_12 = PUT( RESPOND , BEST12.);
 %DMNORMCP( _ARBFMT_12, F_RESPOND );
 
******             ASSIGN OBSERVATION TO NODE             ******;
IF  NOT MISSING(DOLL24 ) AND
                 121.2 <= DOLL24  THEN DO;
  IF  NOT MISSING(TOTORDQ22 ) AND
                       2 <= TOTORDQ22  THEN DO;
    IF  NOT MISSING(BUYPROP ) AND
                     0.775 <= BUYPROP  THEN DO;
      _NODE_  =                   65;
      _LEAF_  =                   25;
      P_RESPOND1  =     0.60869565217391;
      P_RESPOND0  =     0.39130434782608;
      Q_RESPOND1  =     0.60869565217391;
      Q_RESPOND0  =     0.39130434782608;
      V_RESPOND1  =                 0.25;
      V_RESPOND0  =                 0.75;
      I_RESPOND  = '1' ;
      U_RESPOND  =                    1;
      END;
    ELSE DO;
      IF  NOT MISSING(DEPT10 ) AND
                         1.5 <= DEPT10  THEN DO;
        _NODE_  =                   71;
        _LEAF_  =                   24;
        P_RESPOND1  =     0.32142857142857;
        P_RESPOND0  =     0.67857142857142;
        Q_RESPOND1  =     0.32142857142857;
        Q_RESPOND0  =     0.67857142857142;
        V_RESPOND1  =     0.23529411764705;
        V_RESPOND0  =     0.76470588235294;
        I_RESPOND  = '0' ;
        U_RESPOND  =                    0;
        END;
      ELSE DO;
        IF  NOT MISSING(DOLL24 ) AND
                       526.575 <= DOLL24  THEN DO;
          IF  NOT MISSING(DOLINDET ) AND
                        1930.235 <= DOLINDET  THEN DO;
            _NODE_  =                   91;
            _LEAF_  =                   23;
            P_RESPOND1  =                  0.5;
            P_RESPOND0  =                  0.5;
            Q_RESPOND1  =                  0.5;
            Q_RESPOND0  =                  0.5;
            V_RESPOND1  =                    1;
            V_RESPOND0  =                    0;
            I_RESPOND  = '1' ;
            U_RESPOND  =                    1;
            END;
          ELSE DO;
            _NODE_  =                   90;
            _LEAF_  =                   22;
            P_RESPOND1  =     0.77777777777777;
            P_RESPOND0  =     0.22222222222222;
            Q_RESPOND1  =     0.77777777777777;
            Q_RESPOND0  =     0.22222222222222;
            V_RESPOND1  =     0.33333333333333;
            V_RESPOND0  =     0.66666666666666;
            I_RESPOND  = '1' ;
            U_RESPOND  =                    1;
            END;
          END;
        ELSE DO;
          IF  NOT MISSING(DOLINDEA ) AND
            DOLINDEA  <     32.7983333333333 THEN DO;
            _NODE_  =                   88;
            _LEAF_  =                   20;
            P_RESPOND1  =                0.375;
            P_RESPOND0  =                0.625;
            Q_RESPOND1  =                0.375;
            Q_RESPOND0  =                0.625;
            V_RESPOND1  =                 0.25;
            V_RESPOND0  =                 0.75;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          ELSE DO;
            _NODE_  =                   89;
            _LEAF_  =                   21;
            P_RESPOND1  =     0.15662650602409;
            P_RESPOND0  =      0.8433734939759;
            Q_RESPOND1  =     0.15662650602409;
            Q_RESPOND0  =      0.8433734939759;
            V_RESPOND1  =     0.24324324324324;
            V_RESPOND0  =     0.75675675675675;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          END;
        END;
      END;
    END;
  ELSE DO;
    IF  NOT MISSING(DEPT25 ) AND
                        35 <= DEPT25  THEN DO;
      _NODE_  =                   67;
      _LEAF_  =                   19;
      P_RESPOND1  =     0.38709677419354;
      P_RESPOND0  =     0.61290322580645;
      Q_RESPOND1  =     0.38709677419354;
      Q_RESPOND0  =     0.61290322580645;
      V_RESPOND1  =     0.27586206896551;
      V_RESPOND0  =     0.72413793103448;
      I_RESPOND  = '0' ;
      U_RESPOND  =                    0;
      END;
    ELSE DO;
      IF  NOT MISSING(TENURE ) AND
        TENURE  <                  1.5 THEN DO;
        _NODE_  =                   72;
        _LEAF_  =                   14;
        P_RESPOND1  =     0.66666666666666;
        P_RESPOND0  =     0.33333333333333;
        Q_RESPOND1  =     0.66666666666666;
        Q_RESPOND0  =     0.33333333333333;
        V_RESPOND1  =     0.33333333333333;
        V_RESPOND0  =     0.66666666666666;
        I_RESPOND  = '1' ;
        U_RESPOND  =                    1;
        END;
      ELSE DO;
        IF  NOT MISSING(DOLINDEA ) AND
              67.6833333333333 <= DOLINDEA  THEN DO;
          IF  NOT MISSING(DOLLARQ13 ) AND
                          201.55 <= DOLLARQ13  THEN DO;
            _NODE_  =                   95;
            _LEAF_  =                   18;
            P_RESPOND1  =     0.32142857142857;
            P_RESPOND0  =     0.67857142857142;
            Q_RESPOND1  =     0.32142857142857;
            Q_RESPOND0  =     0.67857142857142;
            V_RESPOND1  =     0.26666666666666;
            V_RESPOND0  =     0.73333333333333;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          ELSE DO;
            _NODE_  =                   94;
            _LEAF_  =                   17;
            P_RESPOND1  =     0.08690330477356;
            P_RESPOND0  =     0.91309669522643;
            Q_RESPOND1  =     0.08690330477356;
            Q_RESPOND0  =     0.91309669522643;
            V_RESPOND1  =     0.09597156398104;
            V_RESPOND0  =     0.90402843601895;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          END;
        ELSE DO;
          IF  NOT MISSING(DOLLARQ10 ) AND
                           129.3 <= DOLLARQ10  THEN DO;
            _NODE_  =                   93;
            _LEAF_  =                   16;
            P_RESPOND1  =     0.46666666666666;
            P_RESPOND0  =     0.53333333333333;
            Q_RESPOND1  =     0.46666666666666;
            Q_RESPOND0  =     0.53333333333333;
            V_RESPOND1  =                0.125;
            V_RESPOND0  =                0.875;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          ELSE DO;
            _NODE_  =                   92;
            _LEAF_  =                   15;
            P_RESPOND1  =     0.14338010982306;
            P_RESPOND0  =     0.85661989017693;
            Q_RESPOND1  =     0.14338010982306;
            Q_RESPOND0  =     0.85661989017693;
            V_RESPOND1  =     0.13325608342989;
            V_RESPOND0  =      0.8667439165701;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          END;
        END;
      END;
    END;
  END;
ELSE DO;
  IF  NOT MISSING(TENURE ) AND
    TENURE  <                  1.5 THEN DO;
    IF  NOT MISSING(DAYLAST ) AND
                      46.5 <= DAYLAST  THEN DO;
      _NODE_  =                   63;
      _LEAF_  =                    2;
      P_RESPOND1  =     0.11111111111111;
      P_RESPOND0  =     0.88888888888888;
      Q_RESPOND1  =     0.11111111111111;
      Q_RESPOND0  =     0.88888888888888;
      V_RESPOND1  =                    0;
      V_RESPOND0  =                    1;
      I_RESPOND  = '0' ;
      U_RESPOND  =                    0;
      END;
    ELSE DO;
      _NODE_  =                   62;
      _LEAF_  =                    1;
      P_RESPOND1  =     0.95454545454545;
      P_RESPOND0  =     0.04545454545454;
      Q_RESPOND1  =     0.95454545454545;
      Q_RESPOND0  =     0.04545454545454;
      V_RESPOND1  =                    1;
      V_RESPOND0  =                    0;
      I_RESPOND  = '1' ;
      U_RESPOND  =                    1;
      END;
    END;
  ELSE DO;
    IF  NOT MISSING(DAYLAST ) AND
      DAYLAST  <                683.5 THEN DO;
      IF  NOT MISSING(DEPT25 ) AND
                         4.5 <= DEPT25  THEN DO;
        IF  NOT MISSING(DEPT25 ) AND
                          19.5 <= DEPT25  THEN DO;
          _NODE_  =                   85;
          _LEAF_  =                    9;
          P_RESPOND1  =                 0.21;
          P_RESPOND0  =                 0.79;
          Q_RESPOND1  =                 0.21;
          Q_RESPOND0  =                 0.79;
          V_RESPOND1  =                  0.2;
          V_RESPOND0  =                  0.8;
          I_RESPOND  = '0' ;
          U_RESPOND  =                    0;
          END;
        ELSE DO;
          IF  NOT MISSING(DEPT03 ) AND
                             3.5 <= DEPT03  THEN DO;
            _NODE_  =                  101;
            _LEAF_  =                    8;
            P_RESPOND1  =      0.1560975609756;
            P_RESPOND0  =     0.84390243902439;
            Q_RESPOND1  =      0.1560975609756;
            Q_RESPOND0  =     0.84390243902439;
            V_RESPOND1  =     0.10576923076923;
            V_RESPOND0  =     0.89423076923076;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          ELSE DO;
            _NODE_  =                  100;
            _LEAF_  =                    7;
            P_RESPOND1  =     0.08833678398895;
            P_RESPOND0  =     0.91166321601104;
            Q_RESPOND1  =     0.08833678398895;
            Q_RESPOND0  =     0.91166321601104;
            V_RESPOND1  =     0.08879184861717;
            V_RESPOND0  =     0.91120815138282;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          END;
        END;
      ELSE DO;
        IF  NOT MISSING(TOTORDQ12 ) AND
                           0.5 <= TOTORDQ12  THEN DO;
          IF  NOT MISSING(DEPT11 ) AND
                               4 <= DEPT11  THEN DO;
            _NODE_  =                   99;
            _LEAF_  =                    6;
            P_RESPOND1  =     0.27272727272727;
            P_RESPOND0  =     0.72727272727272;
            Q_RESPOND1  =     0.27272727272727;
            Q_RESPOND0  =     0.72727272727272;
            V_RESPOND1  =                    0;
            V_RESPOND0  =                    1;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          ELSE DO;
            _NODE_  =                   98;
            _LEAF_  =                    5;
            P_RESPOND1  =     0.10659898477157;
            P_RESPOND0  =     0.89340101522842;
            Q_RESPOND1  =     0.10659898477157;
            Q_RESPOND0  =     0.89340101522842;
            V_RESPOND1  =     0.09813084112149;
            V_RESPOND0  =      0.9018691588785;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          END;
        ELSE DO;
          IF  NOT MISSING(DOLLARQ02 ) AND
                         113.625 <= DOLLARQ02  THEN DO;
            _NODE_  =                   97;
            _LEAF_  =                    4;
            P_RESPOND1  =     0.18181818181818;
            P_RESPOND0  =     0.81818181818181;
            Q_RESPOND1  =     0.18181818181818;
            Q_RESPOND0  =     0.81818181818181;
            V_RESPOND1  =     0.14285714285714;
            V_RESPOND0  =     0.85714285714285;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          ELSE DO;
            _NODE_  =                   96;
            _LEAF_  =                    3;
            P_RESPOND1  =     0.05206265166556;
            P_RESPOND0  =     0.94793734833443;
            Q_RESPOND1  =     0.05206265166556;
            Q_RESPOND0  =     0.94793734833443;
            V_RESPOND1  =     0.05445436724025;
            V_RESPOND0  =     0.94554563275974;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          END;
        END;
      END;
    ELSE DO;
      IF  NOT MISSING(DEPT09 ) AND
                        12.5 <= DEPT09  THEN DO;
        _NODE_  =                   77;
        _LEAF_  =                   13;
        P_RESPOND1  =                0.375;
        P_RESPOND0  =                0.625;
        Q_RESPOND1  =                0.375;
        Q_RESPOND0  =                0.625;
        V_RESPOND1  =                    0;
        V_RESPOND0  =                    1;
        I_RESPOND  = '0' ;
        U_RESPOND  =                    0;
        END;
      ELSE DO;
        IF  NOT MISSING(TOTORDQ12 ) AND
                           2.5 <= TOTORDQ12  THEN DO;
          _NODE_  =                   87;
          _LEAF_  =                   12;
          P_RESPOND1  =     0.27272727272727;
          P_RESPOND0  =     0.72727272727272;
          Q_RESPOND1  =     0.27272727272727;
          Q_RESPOND0  =     0.72727272727272;
          V_RESPOND1  =                    0;
          V_RESPOND0  =                    1;
          I_RESPOND  = '0' ;
          U_RESPOND  =                    0;
          END;
        ELSE DO;
          IF  NOT MISSING(DEPT02 ) AND
                             7.5 <= DEPT02  THEN DO;
            _NODE_  =                  103;
            _LEAF_  =                   11;
            P_RESPOND1  =     0.26315789473684;
            P_RESPOND0  =     0.73684210526315;
            Q_RESPOND1  =     0.26315789473684;
            Q_RESPOND0  =     0.73684210526315;
            V_RESPOND1  =                    0;
            V_RESPOND0  =                    1;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          ELSE DO;
            _NODE_  =                  102;
            _LEAF_  =                   10;
            P_RESPOND1  =      0.0337694483734;
            P_RESPOND0  =     0.96623055162659;
            Q_RESPOND1  =      0.0337694483734;
            Q_RESPOND0  =     0.96623055162659;
            V_RESPOND1  =     0.03626386735059;
            V_RESPOND0  =      0.9637361326494;
            I_RESPOND  = '0' ;
            U_RESPOND  =                    0;
            END;
          END;
        END;
      END;
    END;
  END;
 
*****  RESIDUALS R_ *************;
IF  F_RESPOND  NE '1'
AND F_RESPOND  NE '0'  THEN DO;
        R_RESPOND1  = .;
        R_RESPOND0  = .;
 END;
 ELSE DO;
       R_RESPOND1  =  -P_RESPOND1 ;
       R_RESPOND0  =  -P_RESPOND0 ;
       SELECT( F_RESPOND  );
          WHEN( '1'  ) R_RESPOND1  = R_RESPOND1  +1;
          WHEN( '0'  ) R_RESPOND0  = R_RESPOND0  +1;
       END;
 END;
 
****************************************************************;
******          END OF DECISION TREE SCORING CODE         ******;
****************************************************************;
 
drop _LEAF_;
